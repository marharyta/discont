<!DOCTYPE html>
<html lang="en">
  <head> </head>
  <body>
    <p>
      hello
    </p>

    <script>
      if ("Notification" in window) {
        alert(
          "Congrats you are using a modern browser and it supports Notification"
        );

        if (Notification && Notification.permission === "default") {
          Notification.requestPermission(function(permission) {
            console.log("permission", permission);
            if (!("permission" in Notification)) {
              Notification.permission = permission;
            } else if (permission === "granted") {
              // If it's okay let's create a notification
              var notification = new Notification("Hi there!");
              console.log("notification", notification);
              notification.renotify();
            }
          });
        }
      }
      console.log("test");
      var evtSource = new EventSource("http://localhost:5000");
      console.log("test 2", evtSource);
      // evtSource.onmessage = function(e) {
      //   console.log('event', e);
      // }
      evtSource.onopen = function(e) {
        console.log("event open", e);
        evtSource.onmessage = function(e) {
          console.log("event message", e);
        };
      };
    </script>
  </body>
</html>
